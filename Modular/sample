    private readonly Mock<IConnectionMultiplexer> _redisMock = new();
    private readonly Mock<IDatabase> _dbMock = new();
    private readonly Mock<IRedisScriptManager> _scriptManagerMock = new();

    private readonly INotionalValueRedisService _svc;

    public NotionalValueRedisServiceTests()
    {
        // The service under test asks the multiplexer for a database
        _redisMock
            .Setup(r => r.GetDatabase(It.IsAny<int>(), It.IsAny<object?>()))
            .Returns(_dbMock.Object);

        // Construct your concrete service (adjust the constructor if needed)
        _svc = new NotionalValueRedisService(_redisMock.Object, _scriptManagerMock.Object);
    }