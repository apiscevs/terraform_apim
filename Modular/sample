// Retrieve base directory of the main JMX file
def baseDir = org.apache.jmeter.services.FileServer.getFileServer().getBaseDir()
log.info("Base directory: " + baseDir)

// Get file path from property or variable
def relPath = props.get("users_file") ?: vars.get("pathToUsers")
log.info("Relative file path: " + relPath)

// Construct full file path
def file = new File(baseDir, relPath)
log.info("Full file path: " + file.getAbsolutePath())

// Read and log file size (line count)
if (file.exists()) {
    def lineCount = file.readLines().size()
    log.info("File exists. Line count: $lineCount")
} else {
    log.error("File does not exist at: " + file.getAbsolutePath())
}
