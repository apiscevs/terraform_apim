// Pre-request script to get an auth token
pm.sendRequest({
    url: 'https://yourapi.com/auth/token',
    method: 'POST',
    header: {
        'Content-Type': 'application/json'
    },
    body: {
        mode: 'raw',
        raw: JSON.stringify({
            username: 'yourUsername',
            password: 'yourPassword'
        })
    }
}, function (err, res) {
    if (err) {
        console.error('Error fetching token:', err);
    } else {
        // Adjust property names based on your actual response
        var jsonResponse = res.json();
        var token = jsonResponse.access_token; // or whatever the token property is
        // Store token in an environment variable
        pm.environment.set('token', token);
    }
});
